<!DOCTYPE html>

<html xmlns:th="https://www.thymeleaf.org" th:replace="~{fragments/layout :: layout (~{::body})}">
  <body>
    <h2>Skill Sets</h2>
    <p class="text-secondary">Here you can search developers by skill set.<br>
        Common use case: Customer requires one or more developers with skills A, B and C. Can we match that?</p>

    <form class="d-flex" th:action="@{/skills/sets}">
        <input id="skillSetSearchInput1" class="form-control me-2" type="search" name="skillSetQuery"
               th:value="${skillSetQuery}" placeholder="Search for skills, comma separated" aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
    </form>

    <form class="d-flex" th:action="@{/skills/sets}">
        <input id="skillSetSearchInput2" class="form-control me-2" type="search" name="skillSetQuery"
               th:value="${skillSetQuery}" placeholder="Search for skills, comma separated" aria-label="Search">
        <button class="btn btn-outline-success" type="submit">Search</button>
    </form>

        <script type="text/javascript">
                       /* $(document).ready(function() {
                            $("#skillSetSearchInput2").tokenInput([
                                {id: 7, name: "Ruby"},
                                {id: 11, name: "Python"},
                                {id: 13, name: "JavaScript"},
                                {id: 17, name: "ActionScript"},
                                {id: 19, name: "Scheme"},
                                {id: 23, name: "Lisp"},
                                {id: 29, name: "C#"},
                                {id: 31, name: "Fortran"},
                                {id: 37, name: "Visual Basic"},
                                {id: 41, name: "C"},
                                {id: 43, name: "C++"},
                                {id: 47, name: "Java"}
                            ], {
                                theme: "facebook"
                            });
                        });*/
            $(document).ready(function () {
                $("#skillSetSearchInput2").tokenInput("/skills/json", {
                    theme: "facebook",
                    hintText: "Just start typing for skill names...",
                    tokenValue: "name"
                });
            });
        </script>

    <th:block th:if="${skills.size() > 0}">
        <table id="skillSets" class="table table-striped">
            <thead>
            <tr>
                <th style="width: 20%;"></th>
                <th:block th:each="exp : ${skills.get(0).getExperiences()}">
                    <td>
                        <a th:href="@{/developers/__${exp.developer.developerId}__}"
                           th:text="${exp.developer.getFullName()}">Developer Name</a>
                        <span th:text="${' (' + exp.developer.getWeightForSkills(skills) + ')'}"></span>
                    </td>
                </th:block>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="skill : ${skills}">
                <td>
                    <a th:href="@{/skills/__${skill.getSkillId()}__}" th:text="${skill.nameAndVersion}">Skill V1</a>
                </td>

                <th:block th:each="exp : ${skill.getExperiences()}">
                    <td>
                        <span th:if="${exp.getWeight() > 0}" th:text="${exp.getWeight()}">3</span>
                    </td>
                </th:block>
                <td>
                    <span th:text="${skill.getWeight()}"></span>
                </td>
            </tr>
            </tbody>
        </table>
    </th:block>
    <th:block th:unless="${skills.size() > 0}">
        <p><span class="bi bi-emoji-neutral"></span> No Skills found!</p>
    </th:block>

  </body>
</html>
